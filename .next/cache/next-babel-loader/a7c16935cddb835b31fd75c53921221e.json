{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { Form, Button, Input, Message } from 'semantic-ui-react';\nimport Layout from '../../components/Layout';\nimport corporation from '../../ethereum/corporation';\nimport web3 from '../../ethereum/web3';\nimport { Router } from '../../routes';\n\nvar TrustfundNew =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TrustfundNew, _Component);\n\n  function TrustfundNew() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TrustfundNew);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TrustfundNew)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      minimumContribution: '',\n      errorMessage: '',\n      loading: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", function _callee(event) {\n      var accounts;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault(); //stop browser from submitting to backend server\n\n              _this.setState({\n                loading: true,\n                errorMessage: ''\n              });\n\n              _context.prev = 2;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(web3.eth.getAccounts());\n\n            case 5:\n              accounts = _context.sent;\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(corporation.methods.createTrustfund(_this.state.minimumContribution).send({\n                from: accounts[0]\n              }));\n\n            case 8:\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](2);\n\n              _this.setState({\n                errorMessage: _context.t0.message\n              });\n\n            case 13:\n              _this.setState({\n                loading: false\n              });\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[2, 10]]);\n    });\n\n    return _this;\n  }\n\n  _createClass(TrustfundNew, [{\n    key: \"render\",\n    //!!this.state.errorMessage}>inverse of boolean of string\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(Layout, null, __jsx(\"h3\", null, \"Create a new Trust fund \"), __jsx(Form, {\n        onSubmit: this.onSubmit,\n        error: !!this.state.errorMessage\n      }, __jsx(Form.Field, null, __jsx(\"label\", null, \"Minimum Contribution\"), __jsx(Input, {\n        label: \"wei\",\n        labelPosition: \"right\",\n        value: this.state.minimumContribution,\n        onChange: function onChange(event) {\n          return _this2.setState({\n            minimumContribution: event.target.value\n          });\n        }\n      })), __jsx(Message, {\n        error: true,\n        header: \"Something went wrong\",\n        content: this.state.errorMessage\n      }), __jsx(Button, {\n        loading: this.state.loading,\n        primary: true\n      }, \"Create\")));\n    }\n  }]);\n\n  return TrustfundNew;\n}(Component);\n\nexport default TrustfundNew;","map":{"version":3,"sources":["D:/EthereumWorkspace/Trustfund/pages/trustfunds/new.js"],"names":["React","Component","Form","Button","Input","Message","Layout","corporation","web3","Router","TrustfundNew","minimumContribution","errorMessage","loading","event","preventDefault","setState","eth","getAccounts","accounts","methods","createTrustfund","state","send","from","message","onSubmit","target","value"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAAQC,IAAR,EAAcC,MAAd,EAAsBC,KAAtB,EAA6BC,OAA7B,QAA2C,mBAA3C;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAOC,IAAP,MAAiB,qBAAjB;AACA,SAAQC,MAAR,QAAqB,cAArB;;IAEMC,Y;;;;;;;;;;;;;;;;;;4DACE;AACJC,MAAAA,mBAAmB,EAAC,EADhB;AAEJC,MAAAA,YAAY,EAAC,EAFT;AAGJC,MAAAA,OAAO,EAAE;AAHL,K;;+DAKK,iBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACTA,cAAAA,KAAK,CAACC,cAAN,GADS,CACc;;AACvB,oBAAKC,QAAL,CAAc;AAACH,gBAAAA,OAAO,EAAE,IAAV;AAAiBD,gBAAAA,YAAY,EAAE;AAA/B,eAAd;;AAFS;AAAA;AAAA,+CAIgBJ,IAAI,CAACS,GAAL,CAASC,WAAT,EAJhB;;AAAA;AAIDC,cAAAA,QAJC;AAAA;AAAA,+CAKDZ,WAAW,CAACa,OAAZ,CACLC,eADK,CACW,MAAKC,KAAL,CAAWX,mBADtB,EAELY,IAFK,CAEA;AACFC,gBAAAA,IAAI,EAAEL,QAAQ,CAAC,CAAD;AADZ,eAFA,CALC;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAWL,oBAAKH,QAAL,CAAc;AAACJ,gBAAAA,YAAY,EAAE,YAAIa;AAAnB,eAAd;;AAXK;AAaT,oBAAKT,QAAL,CAAc;AAACH,gBAAAA,OAAO,EAAE;AAAV,eAAd;;AAbS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;;;;;;AAeX;6BACQ;AAAA;;AACN,aACA,MAAC,MAAD,QACG,6CADH,EAEG,MAAC,IAAD;AAAM,QAAA,QAAQ,EAAE,KAAKa,QAArB;AAA+B,QAAA,KAAK,EAAE,CAAC,CAAC,KAAKJ,KAAL,CAAWV;AAAnD,SACM,MAAC,IAAD,CAAM,KAAN,QACE,4CADF,EAEE,MAAC,KAAD;AACA,QAAA,KAAK,EAAC,KADN;AAEA,QAAA,aAAa,EAAC,OAFd;AAGA,QAAA,KAAK,EAAE,KAAKU,KAAL,CAAWX,mBAHlB;AAIA,QAAA,QAAQ,EAAE,kBAAAG,KAAK;AAAA,iBAAI,MAAI,CAACE,QAAL,CAAc;AAACL,YAAAA,mBAAmB,EAAGG,KAAK,CAACa,MAAN,CAAaC;AAApC,WAAd,CAAJ;AAAA;AAJf,QAFF,CADN,EAUM,MAAC,OAAD;AAAS,QAAA,KAAK,MAAd;AAAe,QAAA,MAAM,EAAC,sBAAtB;AAA6C,QAAA,OAAO,EAAE,KAAKN,KAAL,CAAWV;AAAjE,QAVN,EAWM,MAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAKU,KAAL,CAAWT,OAA5B;AAAqC,QAAA,OAAO;AAA5C,kBAXN,CAFH,CADA;AAkBD;;;;EAzCwBZ,S;;AA2C3B,eAAeS,YAAf","sourcesContent":["import React, {Component} from 'react';\r\nimport {Form, Button, Input, Message} from 'semantic-ui-react';\r\nimport Layout from '../../components/Layout';\r\nimport corporation from '../../ethereum/corporation';\r\nimport web3 from '../../ethereum/web3';\r\nimport {Router} from '../../routes';\r\n\r\nclass TrustfundNew extends Component{\r\n  state={\r\n    minimumContribution:'',\r\n    errorMessage:'',\r\n    loading: false\r\n  };\r\n  onSubmit = async (event) =>{\r\n    event.preventDefault();//stop browser from submitting to backend server\r\n    this.setState({loading: true , errorMessage: ''});\r\n    try{\r\n      const accounts = await web3.eth.getAccounts();\r\n      await corporation.methods\r\n      .createTrustfund(this.state.minimumContribution)\r\n      .send({\r\n          from: accounts[0]\r\n          });\r\n      } catch (err){\r\n        this.setState({errorMessage: err.message});\r\n    }\r\n    this.setState({loading: false});\r\n  };\r\n  //!!this.state.errorMessage}>inverse of boolean of string\r\n  render(){\r\n    return (\r\n    <Layout>\r\n       <h3>Create a new Trust fund </h3>\r\n       <Form onSubmit={this.onSubmit} error={!!this.state.errorMessage}>\r\n             <Form.Field>\r\n               <label>Minimum Contribution</label>\r\n               <Input\r\n               label=\"wei\"\r\n               labelPosition=\"right\"\r\n               value={this.state.minimumContribution}\r\n               onChange={event => this.setState({minimumContribution : event.target.value})}\r\n               />\r\n             </Form.Field>\r\n             <Message error header=\"Something went wrong\" content={this.state.errorMessage}/>\r\n             <Button loading={this.state.loading} primary>Create</Button>\r\n           </Form>\r\n        </Layout>\r\n     );\r\n  }\r\n}\r\nexport default TrustfundNew\r\n"]},"metadata":{},"sourceType":"module"}